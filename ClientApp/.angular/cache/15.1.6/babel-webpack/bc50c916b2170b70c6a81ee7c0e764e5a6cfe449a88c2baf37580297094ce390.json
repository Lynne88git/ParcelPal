{"ast":null,"code":"import { catchError, map } from 'rxjs/operators';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class ParcelDataService {\n  constructor(http) {\n    this.http = http;\n    this.fileUrl = 'https://gist.githubusercontent.com/Lynne88git/552c061f4ebe867b70f6bc2376653b02/raw/876ca05861ce3bed421e0970b24563dfdfeb7ca5/input.txt';\n  }\n  fetchParcels() {\n    return this.http.get(this.fileUrl, {\n      responseType: 'text'\n    }).pipe(catchError(this.handleError), map(response => {\n      // Split the response into individual lines\n      const lines = response.trim().split('\\n');\n      // Process each line and extract weight limit and item list\n      const result = lines.map(line => {\n        const parts = line.split(':');\n        const weightLimit = Number(parts[0].trim());\n        const itemListString = parts[1].trim();\n        const items = this.parseItemList(itemListString);\n        const chosenItems = this.selectOptimalItems(weightLimit, items);\n        const solution = this.generateSolutionString(chosenItems);\n        return solution;\n      });\n      // Join the results with line breaks and return as a single string\n      return result.join('\\n');\n    }));\n  }\n  parseItemList(data) {\n    // Use regular expressions to extract individual item details\n    const pattern = /\\((\\d+),\\s*(.*?),\\s*([\\d.]+),\\s*€([\\d.]+)\\)/g;\n    const matches = data.matchAll(pattern);\n    // Process each match and create Item objects\n    const items = [];\n    for (const match of matches) {\n      const index = match[1];\n      const name = match[2];\n      const weight = Number(match[3]);\n      const cost = Number(match[4]);\n      const item = {\n        index,\n        name,\n        weight,\n        cost\n      };\n      items.push(item);\n    }\n    return items;\n  }\n}\nParcelDataService.ɵfac = function ParcelDataService_Factory(t) {\n  return new (t || ParcelDataService)(i0.ɵɵinject(i1.HttpClient));\n};\nParcelDataService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: ParcelDataService,\n  factory: ParcelDataService.ɵfac,\n  providedIn: 'root'\n});","map":{"version":3,"mappings":"AAEA,SAASA,UAAU,EAAEC,GAAG,QAAQ,gBAAgB;;;AAOhD,OAAM,MAAOC,iBAAiB;EAG5BC,YAAoBC,IAAgB;IAAhB,SAAI,GAAJA,IAAI;IAFhB,YAAO,GAAG,uIAAuI;EAEjH;EAExCC,YAAY;IACV,OAAO,IAAI,CAACD,IAAI,CAACE,GAAG,CAAC,IAAI,CAACC,OAAO,EAAE;MAAEC,YAAY,EAAE;IAAM,CAAE,CAAC,CACzDC,IAAI,CACHT,UAAU,CAAC,IAAI,CAACU,WAAW,CAAC,EAC5BT,GAAG,CAACU,QAAQ,IAAG;MACb;MACA,MAAMC,KAAK,GAAGD,QAAQ,CAACE,IAAI,EAAE,CAACC,KAAK,CAAC,IAAI,CAAC;MAEzC;MACA,MAAMC,MAAM,GAAGH,KAAK,CAACX,GAAG,CAACe,IAAI,IAAG;QAC9B,MAAMC,KAAK,GAAGD,IAAI,CAACF,KAAK,CAAC,GAAG,CAAC;QAC7B,MAAMI,WAAW,GAAGC,MAAM,CAACF,KAAK,CAAC,CAAC,CAAC,CAACJ,IAAI,EAAE,CAAC;QAC3C,MAAMO,cAAc,GAAGH,KAAK,CAAC,CAAC,CAAC,CAACJ,IAAI,EAAE;QACtC,MAAMQ,KAAK,GAAG,IAAI,CAACC,aAAa,CAACF,cAAc,CAAC;QAChD,MAAMG,WAAW,GAAG,IAAI,CAACC,kBAAkB,CAACN,WAAW,EAAEG,KAAK,CAAC;QAC/D,MAAMI,QAAQ,GAAG,IAAI,CAACC,sBAAsB,CAACH,WAAW,CAAC;QACzD,OAAOE,QAAQ;MACjB,CAAC,CAAC;MAEF;MACA,OAAOV,MAAM,CAACY,IAAI,CAAC,IAAI,CAAC;IAC1B,CAAC,CAAC,CACH;EACL;EAEQL,aAAa,CAACM,IAAY;IAChC;IACA,MAAMC,OAAO,GAAG,8CAA8C;IAC9D,MAAMC,OAAO,GAAGF,IAAI,CAACG,QAAQ,CAACF,OAAO,CAAC;IAEtC;IACA,MAAMR,KAAK,GAAW,EAAE;IACxB,KAAK,MAAMW,KAAK,IAAIF,OAAO,EAAE;MAC3B,MAAMG,KAAK,GAAGD,KAAK,CAAC,CAAC,CAAC;MACtB,MAAME,IAAI,GAAGF,KAAK,CAAC,CAAC,CAAC;MACrB,MAAMG,MAAM,GAAGhB,MAAM,CAACa,KAAK,CAAC,CAAC,CAAC,CAAC;MAC/B,MAAMI,IAAI,GAAGjB,MAAM,CAACa,KAAK,CAAC,CAAC,CAAC,CAAC;MAC7B,MAAMK,IAAI,GAAS;QAAEJ,KAAK;QAAEC,IAAI;QAAEC,MAAM;QAAEC;MAAI,CAAE;MAChDf,KAAK,CAACiB,IAAI,CAACD,IAAI,CAAC;;IAGlB,OAAOhB,KAAK;EACd;;AA/CWnB,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;SAAjBA,iBAAiB;EAAAqC,SAAjBrC,iBAAiB;EAAAsC,YAFhB;AAAM","names":["catchError","map","ParcelDataService","constructor","http","fetchParcels","get","fileUrl","responseType","pipe","handleError","response","lines","trim","split","result","line","parts","weightLimit","Number","itemListString","items","parseItemList","chosenItems","selectOptimalItems","solution","generateSolutionString","join","data","pattern","matches","matchAll","match","index","name","weight","cost","item","push","factory","providedIn"],"sourceRoot":"","sources":["C:\\localdev\\ParcelPal\\ParcelPal\\ClientApp\\src\\app\\services\\parcel-data-service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { catchError, map } from 'rxjs/operators';\r\nimport { Observable, throwError } from 'rxjs';\r\nimport { Item } from '../interfaces/item.interface';\r\n\r\n@Injectable({\r\n  providedIn: 'root'\r\n})\r\nexport class ParcelDataService {\r\n  private fileUrl = 'https://gist.githubusercontent.com/Lynne88git/552c061f4ebe867b70f6bc2376653b02/raw/876ca05861ce3bed421e0970b24563dfdfeb7ca5/input.txt';\r\n\r\n  constructor(private http: HttpClient) { }\r\n\r\n  fetchParcels(): Observable<string[]> {\r\n    return this.http.get(this.fileUrl, { responseType: 'text' })\r\n      .pipe(\r\n        catchError(this.handleError),\r\n        map(response => {\r\n          // Split the response into individual lines\r\n          const lines = response.trim().split('\\n');\r\n\r\n          // Process each line and extract weight limit and item list\r\n          const result = lines.map(line => {\r\n            const parts = line.split(':');\r\n            const weightLimit = Number(parts[0].trim());\r\n            const itemListString = parts[1].trim();\r\n            const items = this.parseItemList(itemListString);\r\n            const chosenItems = this.selectOptimalItems(weightLimit, items);\r\n            const solution = this.generateSolutionString(chosenItems);\r\n            return solution;\r\n          });\r\n\r\n          // Join the results with line breaks and return as a single string\r\n          return result.join('\\n');\r\n        })\r\n      );\r\n  }\r\n\r\n  private parseItemList(data: string): Item[] {\r\n    // Use regular expressions to extract individual item details\r\n    const pattern = /\\((\\d+),\\s*(.*?),\\s*([\\d.]+),\\s*€([\\d.]+)\\)/g;\r\n    const matches = data.matchAll(pattern);\r\n\r\n    // Process each match and create Item objects\r\n    const items: Item[] = [];\r\n    for (const match of matches) {\r\n      const index = match[1];\r\n      const name = match[2];\r\n      const weight = Number(match[3]);\r\n      const cost = Number(match[4]);\r\n      const item: Item = { index, name, weight, cost };\r\n      items.push(item);\r\n    }\r\n\r\n    return items;\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}